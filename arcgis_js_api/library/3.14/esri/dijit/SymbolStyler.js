// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.14/esri/copyright.txt for details.
//>>built
require({cache:{"url:esri/dijit/SymbolStyler/templates/SymbolStyler.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\r\n  \x3cdiv class\x3d"${css.symbolPreviewContainer}"\x3e\r\n    \x3cdiv class\x3d"${css.symbolPreview}" data-dojo-attach-point\x3d"dap_symbolPreview"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/layout/StackController" class\x3d"${css.tabBar}" data-dojo-props\x3d"containerId:\'${id}_stackContainer\'" data-dojo-attach-point\x3d"dap_stackController"\x3e\x3c/div\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/layout/StackContainer" id\x3d"${id}_stackContainer" data-dojo-attach-point\x3d"dap_stackContainer" data-dojo-props\x3d"doLayout: false" class\x3d"${css.content}"\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" title\x3d"${labels.shape}" data-dojo-attach-point\x3d"dap_shapeContainer"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"dap_symbolPicker"\x3e\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"dap_useImageContent"\x3e\r\n        \x3cdiv class\x3d"${css.link}" data-dojo-attach-point\x3d"dap_addImage" tabindex\x3d"0"\x3e${labels.useImage}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"dap_shapeImageUrlContainer" class\x3d"${css.shapeImageUrlContainer}"\x3e\r\n          \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" data-dojo-attach-point\x3d"dap_shapeImageUrlInput" class\x3d"${css.urlInput} dijitInline"\x3e\x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"dap_loadShapeImageUrl" class\x3d"dijitInline ${css.addIcon}" tabindex\x3d"0"\x3e\x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"dap_shapeImageUrlErrorDisplay" class\x3d"${css.errorDisplay}"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"dap_shapeSizeLabel" class\x3d"${css.label}"\x3e${labels.symbolSize}\x3c/div\x3e\r\n      \x3cdiv class\x3d"${css.symbolSizeInput} ${css.inlineInput}" data-dojo-attach-point\x3d"dap_symbolSizeOptions"\x3e\r\n        \x3cdiv data-dojo-type\x3d"esri/dijit/HorizontalSlider" data-dojo-attach-point\x3d"dap_shapeSizeSlider"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/form/NumberSpinner"  data-dojo-attach-point\x3d"dap_shapeSizeTextBox"\x3e\x3c/div\x3e\r\n        \x3cspan class\x3d"${css.text}"\x3e${labels.px}\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" title\x3d"${labels.fill}" data-dojo-attach-point\x3d"dap_fillContainer"\x3e\r\n      \x3cdiv data-dojo-type\x3d"esri/dijit/ColorPicker" data-dojo-attach-point\x3d"dap_fillColorPicker" data-dojo-props\x3d"showSuggestedColors: true"\x3e\x3c/div\x3e\r\n      \x3cdiv data-dojo-type\x3d"esri/dijit/SymbolStyler/ColorRampPicker" data-dojo-attach-point\x3d"dap_fillColorRampPicker" class\x3d"${css.hidden}"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" title\x3d"${labels.outline}" data-dojo-attach-point\x3d"dap_outlineContainer"\x3e\r\n      \x3cdiv data-dojo-type\x3d"esri/dijit/ColorPicker" data-dojo-attach-point\x3d"dap_outlineColorPicker" data-dojo-props\x3d"showSuggestedColors: true"\x3e\x3c/div\x3e\r\n      \x3cdiv data-dojo-type\x3d"esri/dijit/SymbolStyler/ColorRampPicker" data-dojo-attach-point\x3d"dap_outlineColorRampPicker" class\x3d"${css.hidden}"\x3e\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"dap_lineWidthLabel" class\x3d"${css.label}"\x3e${labels.lineWidth}\x3c/div\x3e\r\n      \x3cdiv class\x3d"${css.lineWidthInput} ${css.inlineInput}" data-dojo-attach-point\x3d"dap_lineWidthOptions"\x3e\r\n        \x3cdiv data-dojo-type\x3d"esri/dijit/HorizontalSlider" data-dojo-attach-point\x3d"dap_lineWidthSlider"\x3e\x3c/div\x3e\r\n        \x3cselect data-dojo-type\x3d"dijit/form/ComboBox" data-dojo-attach-point\x3d"dap_lineWidthTextBox"\x3e\r\n          \x3coption\x3e1.0\x3c/option\x3e\r\n          \x3coption\x3e1.2\x3c/option\x3e\r\n          \x3coption\x3e1.5\x3c/option\x3e\r\n          \x3coption\x3e2.0\x3c/option\x3e\r\n          \x3coption\x3e3.0\x3c/option\x3e\r\n          \x3coption\x3e4.0\x3c/option\x3e\r\n          \x3coption\x3e5.0\x3c/option\x3e\r\n          \x3coption\x3e6.0\x3c/option\x3e\r\n          \x3coption\x3e7.0\x3c/option\x3e\r\n          \x3coption\x3e8.0\x3c/option\x3e\r\n          \x3coption\x3e9.0\x3c/option\x3e\r\n          \x3coption\x3e10.0\x3c/option\x3e\r\n        \x3c/select\x3e\r\n        \x3cspan class\x3d"${css.text}"\x3e${labels.px}\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"${css.label}" data-dojo-attach-point\x3d"dap_linePatternSelectLabel"\x3e${labels.pattern}\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"dap_linePatternSelect"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n'}});
define("esri/dijit/SymbolStyler","../dijit/ColorPicker ../domUtils ../kernel ../symbol ./_EventedWidget ./_Tooltip ./ColorPicker/colorUtil ./SymbolStyler/_DelayedUpdate ./SymbolStyler/IconSelect ./SymbolStyler/MarkerSymbolPicker ./SymbolStyler/schemeUtil ./SymbolStyler/stylerUtil ./SymbolStyler/symbolUtil dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/a11yclick dijit/form/CheckBox dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/has dojo/keys dojo/on dojo/string dojo/i18n!esri/nls/jsapi dojo/text!./SymbolStyler/templates/SymbolStyler.html ../dijit/HorizontalSlider ./SymbolStyler/MarkerSymbolPicker ./SymbolStyler/ColorRampPicker dijit/form/Button dijit/form/ComboBox dijit/form/NumberSpinner dijit/form/Select dijit/form/TextBox dijit/layout/BorderContainer dijit/layout/ContentPane dijit/layout/StackController dijit/layout/StackContainer".split(" "),
function(n,g,w,l,m,x,y,z,r,A,s,f,c,B,C,t,D,p,E,e,h,k,F,G,u,v,q,H){m=E([m,B,C,z,x],{_RECENT_FILL_COLORS_ITEM_KEY:"symbolStyler/recent/fill/colors",_RECENT_OUTLINE_COLORS_ITEM_KEY:"symbolStyler/recent/outline/colors",_defaultMinLineWidthInPx:0,_defaultMinShapeSizeInPx:1,_defaultMaxLineWidthInPx:18,_defaultMaxShapeSizeInPx:120,declaredClass:"esri.dijit.SymbolStyler",baseClass:"esriSymbolStyler",templateString:H,labels:null,css:{symbolPreviewContainer:"esriSymbolPreviewContainer",symbolPreview:"esriSymbolPreview",
tabBar:"esriTabBar",content:"esriContent",link:"esriLink",label:"esriLabel",shapeImageUrlContainer:"esriShapeImageUrlContainer",urlInput:"esriUrlInput",addIcon:"esriAddIcon",errorDisplay:"esriErrorDisplay",symbolSizeInput:"esriSymbolSizeInput",inlineInput:"esriInlineInput",text:"esriText",hidden:"esriHidden",lineWidthInput:"esriLineWidthInput",linePattern:"esriLinePattern",linePatternInput:"esriLinePatternInput",alt:"esriAlt",disabled:"esriDisabled"},_originalSymbol:null,_editedSymbol:null,_activeTabName:null,
_externalSizing:!1,_delayedCommitPropsTrigger:null,_symbolPickerOpts:{},_symbolPreviewSurface:null,_linePatternSelect:null,_symbolPicker:null,_customImageSymbol:null,_optimizationSection:null,_optimizationCheckBox:null,constructor:function(a){a=a?a:{};this._delayedCommitPropsTrigger=this.createUpdateTrigger(this._commitProperties,this);a.portalSelf?this._symbolPickerOpts.portalSelf=a.portalSelf:a.portalUrl&&(this._symbolPickerOpts.portalUrl=a.portalUrl);this._initOptimizationControls()},_initOptimizationControls:function(){var a=
new D,b=k.create("div",{className:n.prototype.css.section});k.create("label",{"for":a.id,className:this.css.label,innerHTML:q.widgets.symbolEditor.autoAdjustOutline},b);a.on("change",e.hitch(this,function(a){a&&(a=this.dap_outlineColorPicker.get("color"),a.a=0.5,this.dap_outlineColorPicker.set("color",a));this._delayedCommitPropsTrigger()}));a.placeAt(b,"first");this._optimizationSection=b;this._optimizationCheckBox=a},postMixInProperties:function(){this.inherited(arguments);this.labels=e.mixin({},
q.common,q.widgets.symbolEditor)},_toggleOutlineColorControls:function(a){var b=this.dap_outlineColorRampPicker,d=this.dap_outlineColorPicker;this._shouldShowOutlineColorRamp(a)?(this._show(b),this._hide(d)):(this._show(d),this._hide(b))},_shouldShowOutlineColorRamp:function(a){return this._hasColorRamp()&&(c.isLine(a)||c.isPoint(a)&&c.hasPureOutlineStyle(a))},_setUpColorControls:function(a,b){var d=this.dap_outlineColorRampPicker,c=this.dap_outlineColorPicker,e=this.dap_fillColorRampPicker,g=this.dap_fillColorPicker,
f;b?(f={colors:b.colors},b.scheme&&(f.scheme=b.scheme),this._isLine()?(d.set({schemes:a,selected:f,numStops:b.numStops}),this._hide(c),this._show(d)):(this._isPoint()&&d.set({schemes:a,selected:f,numStops:b.numStops}),e.set({schemes:a,selected:f,numStops:b.numStops}),this._show(e),this._show(c),this._hide(g),this._hide(d))):(this._show(g),this._show(c),this._hide(e),this._hide(d),this._updateSuggestedColors(g,s.getFillColors(a)));this._updateSuggestedColors(c,s.getOutlineColors(a))},edit:function(a,
b){var d=c.cloneSymbol(a),e;b=b||{};this._colorRamp=e=b.colorRamp;this._originalSymbol=a;this._editedSymbol=d;this._activeTabName=b.activeTab;this._externalSizing=b.externalSizing;this._optimizationOptions="boolean"===typeof b.optimizeOutline?{value:b.optimizeOutline}:void 0;this._setUpColorControls(b.schemes,e);this._assimilateSymbol(d);this._toggleSizingControls(this._externalSizing);this._updateSymbolPicker();this._toggleOutlineColorControls(d);this._toggleOptimizationOptions()},_toggleOptimizationOptions:function(){var a=
this._optimizationOptions,b=this._optimizationSection;c.isPolygon(this._editedSymbol)&&a?(this._optimizationCheckBox.set("value",a.value),k.place(b,this.dap_outlineColorPicker.dap_recentColorSection)):b.parentNode&&k.empty(b.parentNode)},_importRecentColors:function(){this.dap_fillColorPicker.loadRecentColors(this._RECENT_FILL_COLORS_ITEM_KEY);this.dap_outlineColorPicker.loadRecentColors(this._RECENT_OUTLINE_COLORS_ITEM_KEY)},_hasColorRamp:function(){return!!this._colorRamp},_toggleSizingControls:function(a){var b=
!1,d=!1;a&&(this._isLine()?d=!0:b=!0);this._toggleLabeledControls({labels:this.dap_lineWidthLabel,controls:[this.dap_lineWidthTextBox,this.dap_lineWidthSlider],disabled:d});this._toggleLabeledControls({labels:this.dap_shapeSizeLabel,controls:[this.dap_shapeSizeTextBox,this.dap_shapeSizeSlider],disabled:b})},_toggleLabeledControls:function(a){var b=a.labels,d=a.controls,c=a.disabled;e.isArray(b)?p.forEach(b,function(a){h.toggle(a,this.css.disabled,c)},this):h.toggle(b,this.css.disabled,c);e.isArray(d)?
p.forEach(d,function(a){a.set("disabled",c)}):d.set("disabled",c)},_updateSymbolPicker:function(){var a=this._isPoint()&&this._hasColorRamp()?"default":"portal";"portal"===a?g.show(this.dap_useImageContent):g.hide(this.dap_useImageContent);this._symbolPicker.set("displayMode",a);this._symbolPicker.clearSelection()},shapeSymbol:null,_setShapeSymbolAttr:function(a){this._adjustOutlineProperties(this._editedSymbol,a);this._set("shapeSymbol",a);this._editedSymbol=a;this._toggleTabs(a);this._toggleOutlineColorControls(a);
this._delayedCommitPropsTrigger()},_adjustOutlineProperties:function(a,b){var d=this.dap_fillColorPicker,e=this.dap_outlineColorPicker,g=this.dap_fillColorRampPicker,f=this.dap_outlineColorRampPicker;this._switchedFromPmsToSms(a,b)?(d.set("color",b.color),d=c.getOutline(b),e.set("color",d.color),this.dap_lineWidthSlider.set("value",d.width),this._linePatternSelect.set("value",d.style)):this._switchedPureOutlineToSmsStyle(a,b)&&this._hasColorRamp()?g.set("selected",f.get("selected")):this._switchedSmsStyleToPureOutline(a,
b)&&(this._hasColorRamp()?f.set("selected",g.get("selected")):(d=c.getOutline(a),f=e.get("color"),d.color?(g=y.isBright(d.color))&&0.2>d.color.a?(f.a=0.2,e.set("color",f)):!g&&0.1>d.color.a&&(f.a=0.1,e.set("color",f)):e.set("color",b.color)))},_switchedFromPmsToSms:function(a,b){return c.isType(a,"picturemarker")&&c.isType(b,"simplemarker")},_switchedSmsStyleToPureOutline:function(a,b){return c.isType(a,"simplemarker")&&c.isType(b,"simplemarker")&&c.hasPureOutlineStyle(a)&&c.hasPureOutlineStyle(b)},
_switchedPureOutlineToSmsStyle:function(a,b){return this._switchedSmsStyleToPureOutline(b,a)},shapeSize:null,_setShapeSizeAttr:function(a){this._set("shapeSize",a);this._delayedCommitPropsTrigger()},_shapeImageUrl:null,_setShapeImageUrlAttr:function(a){this._set("shapeImageUrl",a);this._delayedCommitPropsTrigger()},fillColor:null,_setFillColorAttr:function(a){a=a===n.NO_COLOR?null:a;this._set("fillColor",a);this._delayedCommitPropsTrigger()},fillColorRamp:null,_setFillColorRampAttr:function(a){this._set("fillColorRamp",
a);this._delayedCommitPropsTrigger()},outlineColorRamp:null,_setOutlineColorRampAttr:function(a){this._set("outlineColorRamp",a);this._delayedCommitPropsTrigger()},outlineWidth:null,_setOutlineWidthAttr:function(a){this._set("outlineWidth",a);this._delayedCommitPropsTrigger()},outlineColor:null,_setOutlineColorAttr:function(a){a=a===n.NO_COLOR?null:a;var b=!!this._optimizationOptions&&this._optimizationCheckBox.checked;a&&b&&(a.a=0.5,this.dap_outlineColorPicker.set("color",a,!1));this._set("outlineColor",
a);this._delayedCommitPropsTrigger()},outlinePattern:null,_setOutlinePatternAttr:function(a){this._set("outlinePattern",a);this._delayedCommitPropsTrigger()},_getTabContainer:function(a){return"fill"===a?this.dap_fillContainer:"outline"===a?this.dap_outlineContainer:this.dap_shapeContainer},_storeRecentFillColors:function(){this._storeRecentColors(this.dap_fillColorPicker,this._RECENT_FILL_COLORS_ITEM_KEY)},_storeRecentOutlineColors:function(){this._storeRecentColors(this.dap_outlineColorPicker,this._RECENT_OUTLINE_COLORS_ITEM_KEY)},
_storeRecentColors:function(a,b){a.addRecentColor(a.get("color"));a.saveRecentColors(b)},_isPoint:function(){return c.isPoint(this._editedSymbol)},_isLine:function(){return c.isLine(this._editedSymbol)},_isPolygon:function(){return c.isPolygon(this._editedSymbol)},_addHandlers:function(){this.own(this.dap_shapeContainer.on("show",e.hitch(this,function(){this._symbolPicker._updateTemplatePickerIfHeightless()})));this._linePatternSelect.on("change",e.hitch(this,function(a){this.set("outlinePattern",
a)}));this.own(u(this.dap_loadShapeImageUrl,t,e.hitch(this,function(){this._loadImage(this.dap_shapeImageUrlInput.get("value"))})));this.own(u(this.dap_addImage,t,e.hitch(this,function(){g.show(this.dap_shapeImageUrlContainer);this.dap_shapeImageUrlInput.focus()})));this.dap_shapeImageUrlInput.on("input",e.hitch(this,function(a){a.keyCode===G.ENTER&&this._loadImage(this.dap_shapeImageUrlInput.get("value"))}));this.dap_shapeImageUrlInput.on("change",e.hitch(this,function(a){this.set("shapeImageUrl",
a)}));this.dap_shapeSizeSlider.on("change",e.hitch(this,function(a){this.set("shapeSize",a)}));this.dap_fillColorPicker.on("color-change",e.hitch(this,function(a){this.set("fillColor",a.color)}));this.dap_fillColorRampPicker.on("color-ramp-change",e.hitch(this,function(a){this.set("fillColorRamp",a.colors)}));this.dap_outlineColorRampPicker.on("color-ramp-change",e.hitch(this,function(a){this.set("outlineColorRamp",a.colors)}));this.dap_lineWidthSlider.on("change",e.hitch(this,function(a){this.set("outlineWidth",
a)}));this.dap_outlineColorPicker.on("color-change",e.hitch(this,function(a){this.set("outlineColor",a.color)}));f.bindSliderAndTextBox(this.dap_lineWidthSlider,this.dap_lineWidthTextBox);f.bindSliderAndTextBox(this.dap_shapeSizeSlider,this.dap_shapeSizeTextBox);this._symbolPicker.on("symbol-select",e.hitch(this,function(a){this._hideImageUrlInput();this.set("shapeSymbol",a.selection)}));this.dap_shapeSizeSlider.on("change",e.hitch(this,this._onSizeChange));this.dap_fillColorPicker.on("color-change",
e.hitch(this,this._onFillColorChange));this.dap_outlineColorPicker.on("color-change",e.hitch(this,this._onOutlineColorChange));this.dap_lineWidthSlider.on("change",e.hitch(this,this._onWidthChange))},getStyle:function(){var a=c.cloneSymbol(this._editedSymbol),b={symbol:a};this._hasColorRamp()&&(a=(a=c.isLine(a)||c.isPoint(a)&&c.hasPureOutlineStyle(a))?this.dap_outlineColorRampPicker:this.dap_fillColorRampPicker,e.mixin(b,a.getStyle()));this._optimizationOptions&&(b.optimizeOutline=this._optimizationCheckBox.checked);
return b},storeColors:function(){this._storeRecentFillColors();this._storeRecentOutlineColors()},postCreate:function(){this.inherited(arguments);this._linePatternSelect=new r({baseClass:r.prototype.baseClass+" "+this.baseClass+" "+this.css.linePatternInput},this.dap_linePatternSelect);g.hide(this.dap_shapeImageUrlContainer);this.dap_lineWidthTextBox.selectOnClick=!0;this.dap_shapeSizeTextBox.selectOnClick=!0;this.dap_lineWidthSlider.intermediateChanges=!0;this.dap_lineWidthTextBox.intermediateChanges=
!0;this.dap_shapeSizeSlider.intermediateChanges=!0;this.dap_shapeSizeTextBox.intermediateChanges=!0;this.dap_fillColorPicker.trackColors=!1;this.dap_outlineColorPicker.trackColors=!1;this._linePatternSelect.addIconOptions(["solid","dot","dash","dashdot","dashdotdot"],this.css.linePattern);this._importRecentColors();this.createTooltips([{node:this.dap_shapeImageUrlContainer,label:this.labels.imageUrlInputTooltip},{node:this.dap_addImage,label:this.labels.useImageTooltip},{node:this.dap_symbolSizeOptions},
{node:this.dap_lineWidthOptions}]);this.dap_outlineColorPicker._enableTransparencySlider=function(){};this.dap_outlineColorPicker._disableTransparencySlider=function(){}},_updateSliderAndTextBoxConstraints:function(a){var b=a.minimum,d=a.maximum;a.textBox.set("constraints",{min:b,max:d});a.slider.set({minimum:b,maximum:d,discreteValues:Math.round(d)-Math.round(b)+1})},_loadImage:function(a){this._clearUrlImageErrorDisplay();c.testImageUrl(a).then(e.hitch(this,function(){var b,d;b=this._customImageSymbol;
d=this.shapeSize;b?(b.url=a,b.height=d,b.width=d):this._customImageSymbol=b=new l.PictureMarkerSymbol(a,d,d);this.set("shapeSymbol",b)}),e.hitch(this,function(){this._showUrlImageErrorDisplay(this.labels.imageLoadError)}))},_showUrlImageErrorDisplay:function(a){this.dap_shapeImageUrlErrorDisplay.innerHTML=a},_clearUrlImageErrorDisplay:function(){this.dap_shapeImageUrlErrorDisplay.innerHTML=""},_getActiveTabAttr:function(){var a=this.dap_stackContainer.selectedChildWidget;return a===this.dap_outlineContainer?
"outline":a===this.dap_fillContainer?"fill":"shape"},_updateTabs:function(a){this._toggleTabs(a);this._showRelevantTabs(a);this._selectActiveTab();f.ensureEnabledChildSelection(this.dap_stackContainer)},_supportsPattern:function(a){return c.isLine(a)||c.isPolygon(a)},_toggleTabs:function(a){this._shouldShowShapeTab(a)?this._enableTab("shape"):this._disableTab("shape");this._shouldShowFillTab(a)?this._enableTab("fill"):this._disableTab("fill");this._shouldShowOutlineTab(a)?(this._enableTab("outline"),
this._supportsPattern(a)?(g.show(this.dap_linePatternSelectLabel),g.show(this._linePatternSelect.domNode)):(g.hide(this.dap_linePatternSelectLabel),g.hide(this._linePatternSelect.domNode))):this._disableTab("outline")},_shouldShowShapeTab:function(a){return"simplemarkersymbol"===a.type||"picturemarkersymbol"===a.type},_enableTab:function(a){f.enable(this._getTabContainer(a))},_disableTab:function(a){f.disable(this._getTabContainer(a))},_shouldShowFillTab:function(a){return"simplemarkersymbol"===a.type&&
a.style===l.SimpleMarkerSymbol.STYLE_CIRCLE||"simplemarkersymbol"===a.type&&a.style===l.SimpleMarkerSymbol.STYLE_SQUARE||"simplemarkersymbol"===a.type&&a.style===l.SimpleMarkerSymbol.STYLE_DIAMOND||"simplefillsymbol"===a.type},_shouldShowOutlineTab:function(a){return"simplemarkersymbol"===a.type||"simplefillsymbol"===a.type||"cartographiclinesymbol"===a.type||"simplelinesymbol"===a.type},_syncControls:function(a){var b;this._hideImageUrlInput();this._updateSizingConstraints();this._shouldShowShapeTab(a)&&
(b=c.getMarkerLength(a),this.set("shapeSize",b),f.silentlyUpdateIntermediateChangingValueWidget(this.dap_shapeSizeSlider,b),f.silentlyUpdateIntermediateChangingValueWidget(this.dap_shapeSizeTextBox,b));this._shouldShowFillTab(a)&&(this.set("fillColor",a.color),this.dap_fillColorPicker.set("color",a.color,!1));this._shouldShowOutlineTab(a)&&(a=c.getOutline(a),this.set("outlineColor",a.color),this.set("outlineWidth",a.width),this.set("outlinePattern",a.style),this.dap_outlineColorPicker.set("color",
a.color,!1),f.silentlyUpdateIntermediateChangingValueWidget(this.dap_lineWidthSlider,a.width),f.silentlyUpdateIntermediateChangingValueWidget(this.dap_lineWidthTextBox,a.width),this._linePatternSelect.set("value",a.style,!1))},_updateSizingConstraints:function(){var a=c.getOutline(this._editedSymbol),a=a&&a.width>this._defaultMaxLineWidthInPx?Math.ceil(a.width):this._defaultMaxLineWidthInPx,b=c.getMarkerLength(this._editedSymbol),b=b>this._defaultMaxShapeSizeInPx?Math.ceil(b):this._defaultMaxShapeSizeInPx;
this._updateSliderAndTextBoxConstraints({textBox:this.dap_lineWidthTextBox,slider:this.dap_lineWidthSlider,minimum:this._defaultMinLineWidthInPx,maximum:a});this.findTooltip(this.dap_lineWidthOptions).set("label",v.substitute(this.labels.lineWidthTooltip,{min:this._defaultMinLineWidthInPx,max:a}));this._updateSliderAndTextBoxConstraints({textBox:this.dap_shapeSizeTextBox,slider:this.dap_shapeSizeSlider,minimum:this._defaultMinShapeSizeInPx,maximum:b});this.findTooltip(this.dap_symbolSizeOptions).set("label",
v.substitute(this.labels.symbolSizeTooltip,{min:this._defaultMinShapeSizeInPx,max:b}))},_assimilateSymbol:function(a){this._updateTabs(a);this._syncControls(a)},startup:function(){this.inherited(arguments);var a=new A(this._symbolPickerOpts,this.dap_symbolPicker);a.startup();this._symbolPicker=a;this._addHandlers()},_hideImageUrlInput:function(){this._clearUrlImageErrorDisplay();g.hide(this.dap_shapeImageUrlContainer);this.dap_shapeImageUrlInput.set("value","")},_showRelevantTabs:function(){var a=
this.dap_stackContainer,b=this.dap_shapeContainer,d=this.dap_fillContainer,c=this.dap_outlineContainer;p.forEach(a.getChildren(),function(b){a.removeChild(b)});this._isPoint()&&(a.addChild(b),a.addChild(d),a.addChild(c));this._isLine()&&a.addChild(c);this._isPolygon()&&(a.addChild(d),a.addChild(c));1===a.getChildren().length?g.hide(this.dap_stackController.domNode):g.show(this.dap_stackController.domNode)},_selectActiveTab:function(){var a=this._getTabContainer(this._activeTabName);-1<this.dap_stackContainer.getIndexOfChild(a)&&
this.dap_stackContainer.selectChild(a)},_onFillColorChange:function(a){this.set("fillColor",a.color)},_onOutlineColorChange:function(a){this.set("outlineColor",a.color)},_getFillColor:function(){return!this._isLine()&&this._hasColorRamp()?this._getMiddleItem(this.fillColorRamp):this.fillColor},_getMiddleItem:function(a){return a[Math.floor(0.5*(a.length-1))]},_getOutlineColor:function(){return this._shouldShowOutlineColorRamp(this._editedSymbol)?this._getMiddleItem(this.outlineColorRamp):this.outlineColor},
_commitProperties:function(){var a=this._editedSymbol;this._shouldShowShapeTab(a)&&this._updateShapeSize();this._shouldShowFillTab(a)&&c.setFillColor(a,this._getFillColor());this._shouldShowOutlineTab(a)&&(c.setOutlineColor(a,this._getOutlineColor()),this._updateOutlinePattern(),this._updateOutlineWidth());this._updatePreviewSymbol();this._toggleOutlineOptions();this.emit("style-update")},_toggleOutlineOptions:function(){var a=!!this._optimizationOptions&&this._optimizationCheckBox.checked,b=this.outlineColor,
c=this._isLine(),e=a||!b,f=!b;this._toggleLabeledControls({labels:this.dap_lineWidthLabel,controls:[this.dap_lineWidthTextBox,this.dap_lineWidthSlider],disabled:this._externalSizing&&c||!b||a});this._toggleLabeledControls({labels:this.dap_linePatternSelectLabel,controls:this._linePatternSelect,disabled:f});this._toggleLabeledControls({labels:[this.dap_outlineColorPicker.dap_transparencyLabel],controls:[this.dap_outlineColorPicker.dap_transparencySlider],disabled:e})},_updatePreviewSymbol:function(){var a=
this._editedSymbol,b=this.css.alt,d=this.dap_symbolPreview;this._symbolPreviewSurface&&this._symbolPreviewSurface.destroy();h.toggle(d,b,this._blendsIntoBackground(a));this._symbolPreviewSurface=c.renderOnSurface(a,d)},_blendsIntoBackground:function(a){return c.hasColor(a.outline)?this._isWhitish(a.outline.color):this._isWhitish(a.color)},_isWhitish:function(a){return a&&246<a.r&&246<a.g&&246<a.b},destroy:function(){this._symbolPreviewSurface&&this._symbolPreviewSurface.destroy();k.destroy(this._optimizationSection);
this._optimizationCheckBox.destroy();this.dap_shapeContainer.destroy();this.dap_fillContainer.destroy();this.dap_outlineContainer.destroy();this.inherited(arguments)},_updateSuggestedColors:function(a,b){a.set("suggestedColors",b)},_updateOutlineWidth:function(){c.setOutlineWidth(this._editedSymbol,this.outlineWidth)},_onWidthChange:function(a){this.set("outlineWidth",a)},_onSizeChange:function(a){this.set("shapeSize",a)},_updateShapeSize:function(){c.setSize(this._editedSymbol,this.shapeSize)},_updateOutlinePattern:function(){this._shouldShowOutlineTab(this._editedSymbol)&&
c.setOutlineStyle(this._editedSymbol,c.toFullLineStyle(this.outlinePattern))},_show:function(a){h.remove(g.getNode(a),this.css.hidden)},_hide:function(a){h.add(g.getNode(a),this.css.hidden)},popUp:function(a){f.popUp(this,a)}});F("extend-esri")&&e.setObject("dijit.SymbolStyler",m,w);return m});