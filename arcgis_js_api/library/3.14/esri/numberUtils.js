// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.14/esri/copyright.txt for details.
//>>built
define("esri/numberUtils",["dojo/has","dojo/number","dojo/i18n!dojo/cldr/nls/number","./kernel"],function(r,s,t,u){var v=function(c,b){return c-b},d={_reNumber:/^-?(\d+)(\.(\d+))?$/i,getDigits:function(c){var b=String(c),a=b.match(d._reNumber);c={integer:0,fractional:0};a&&a[1]?(c.integer=a[1].split("").length,c.fractional=a[3]?a[3].split("").length:0):-1<b.toLowerCase().indexOf("e")&&(a=b.split("e"),b=a[0],a=a[1],b&&a&&(b=Number(b),a=Number(a),(c=0<a)||(a=Math.abs(a)),b=d.getDigits(b),c?(b.integer+=
a,b.fractional=a>b.fractional?0:b.fractional-a):(b.fractional+=a,b.integer=a>b.integer?1:b.integer-a),c=b));return c},getFixedNumbers:function(c,b){var a,e;a=Number(c.toFixed(b));e=a<c?a+1/Math.pow(10,b):a-1/Math.pow(10,b);return[a,e]},getPctChange:function(c,b,a,e){var d={prev:null,next:null},f;null!=a&&(f=c-a,a=b-a-f,d.prev=Math.floor(Math.abs(100*a/f)));null!=e&&(f=e-c,a=e-b-f,d.next=Math.floor(Math.abs(100*a/f)));return d},round:function(c,b){var a=c.slice(0),e,k,f,n,m,g,p,q,h,r=!b||null==b.tolerance?
2:b.tolerance,l=b&&b.indexes;if(l)l.sort(v);else{l=[];for(g=0;g<a.length;g++)l.push(g)}for(g=0;g<l.length;g++)if(h=l[g],e=a[h],k=0===h?null:a[h-1],f=h===a.length-1?null:a[h+1],n=d.getDigits(e),n=n.fractional){p=0;for(q=!1;p<=n&&!q;)m=d.getFixedNumbers(e,p),m=m[0],q=d.hasMinimalChange(e,m,k,f,r),p++;q&&(a[h]=m)}return a},hasMinimalChange:function(c,b,a,e,k){c=d.getPctChange(c,b,a,e);b=null==c.prev||c.prev<=k;a=null==c.next||c.next<=k;return b&&a||c.prev+c.next<=2*k},_reAllZeros:RegExp("\\"+t.decimal+
"0+$","g"),_reSomeZeros:RegExp("(\\d)0*$","g"),format:function(c,b){b=b||{places:20,round:-1};var a=s.format(c,b);a&&(a=a.replace(d._reSomeZeros,"$1").replace(d._reAllZeros,""));return a}};r("extend-esri")&&(u.numberUtils=d);return d});